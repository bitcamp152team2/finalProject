<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      layout:decorator="~{layout/default}">

<title id="pageTitle">결재 문서 조회</title>

<div layout:fragment="content">
    <script src="//cdn.ckeditor.com/4.14.0/full/ckeditor.js"></script>
    <script th:src="@{/js/approval/jquery.treeview.js}"></script>
    <link rel="stylesheet" th:href="@{/js/approval/jquery.treeview.css}"/>

    <div class="row">
        <div class="col-12 grid-margin">
            <div class="card">
                <div class="card-body">
                    <div class="form-group row">
                        <button type="submit" class="btn btn-success btn-fw"
                                style="float: right; margin-left: 25px"
                                onclick="location.href = '/approval/getApProgressList'">목록
                        </button>
                        <button type="submit" class="btn btn-success btn-fw"
                                style="float: right; margin-left: 25px">승인
                        </button>
                        <button type="submit" class="btn btn-success btn-fw"
                                style="float: right; margin-left: 25px">반려
                        </button>
                    </div>
                    <h3 class="card-title" th:text="어떤문서종류인지" readonly></h3><br>

                    <div class="form-group row">
                        <div class="col-lg-2">
                            <label class="col-form-label">제목</label>
                        </div>
                        <div class="col-lg-8">
                            <input class="form-control" maxlength="100" name="apDocTitle" type="text"
                                   id="apDocTitle"
                                   th:value="제목불러오기">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-lg-2">
                            <label class="col-form-label">기안자</label>
                        </div>
                        <div class="col-lg-8">
                            <!--principal로 수정했는데 이름으로 나오도록 변경하기-->
                            <input class="form-control" maxlength="100" name="apDocWriter"
                                   th:value="${#authentication.name}" type="text" readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-lg-2">
                            <label class="col-form-label">기안일</label>
                        </div>
                        <div class="col-lg-8">
                            <!--principal로 수정했는데 이름으로 나오도록 변경하기-->
                            <input class="form-control" maxlength="100" name="apDocWriter"
                                   value="기안일" type="text" readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-lg-2">
                            <label class="col-form-label">참조자</label>
                        </div>
                        <div class="col-lg-8">
                            <div class="row">
                                <div class="col-12 col">
                                    <input class="form-control" maxlength="200" name="apReferrers" type="text"
                                           value="참조자 목록" readonly>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-lg-2">
                            <label class="col-form-label">첨부파일</label>
                        </div>
                        <div class="col-lg-8">
                            <div class="uploadResult">
                                <ul>

                                </ul>
                            </div>
                        </div>

                    </div>
                    <div class="form-group row">
                        <div class="col-lg-2">
                            <label class="col-form-label" name="dateFormName">휴가 일자</label>
                        </div>
                        <div class="col-lg-8">
                            <input type="date" class="form-control" name="apExecutionDate" readonly>
                        </div>
                    </div>

                    <th:block th:if="${approvalData} != null">
                        <label class="col-form-label">결재선</label>
                        <div class="" style="width: 100%">

                            <table class="" border="1" style="table-layout: fixed">
                                <thead>
                                <tr>
                                    <th:block th:each="i : ${#numbers.sequence( 0, approvalData.size()-1)}">
                                        <th width="40px" th:text="${approvalData.get(i).getApDutyName()}"></th>
                                    </th:block>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th:block th:each="i : ${#numbers.sequence( 0, approvalData.size()-1)}">
                                        <td width="40px" th:text="${approvalData.get(i).getUserName()}"></td>
                                    </th:block>
                                </tr>
                                <tr>
                                    <th:block th:each="i : ${#numbers.sequence( 0, approvalData.size()-1)}">
                                        <td th:if="${approvalData.get(i).getApResult().toString().equals('0')}" width="40px" th:text="미결"></td>
                                    </th:block>
                                </tr>
                                </tbody>
                            </table>

                    </th:block>
                    <br>

                    <label class="col-form-label">문서 내용</label>
                    <div class="document-editor">
                        <div class="document-editor__toolbar"></div>
                        <div class="document-editor__editable-container">
                            <div class="document-editor__editable" name="editor1">
                            </div>
                        </div>
                    </div>

                    <input type="hidden" name="apDocContent" id="formData" value="문서내용 여따 넣어">

                    <!-- 모달 -->
                    <!-- 모달 end -->

                    <div id="js-legend" class="chartjs-legend mt-4 mb-5"></div>
                </div> <!--card body end-->
            </div>
        </div>

        <script>
            //에디터 띄우기
            CKEDITOR.replace(document.querySelector('.document-editor__editable'), {
                toolbar: [
                    {
                        name: 'document',
                        groups: ['mode', 'document', 'doctools'],
                        items: ['Source', '-', 'Save', 'NewPage', 'Preview', 'Print', '-', 'Templates']
                    }
                ],
                width: '100%',
                height: '800px',
                startupFocus: false
            });
            var formData = document.querySelector('#formData').value;

            CKEDITOR.instances.editor1.setData(formData);
            // CKEDITOR.config.readOnly = true;


            $(document).ready(function (e) {


            });//end
        </script>

    </div> <!-- content end -->
</html>
